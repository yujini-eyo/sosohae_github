<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>소소한 도움 – 시작하기</title>
  <!-- 폰트 -->
  <link href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/static/woff2/SUIT.css" rel="stylesheet" />
  <style>
    /* =====================
       0) Design Tokens
       ===================== */
    :root{
      --bg:#FFF8F2; --text:#59463E; --muted:#806A5A;
      --primary:#F6A96D; --primary-600:#e98c45;
      --brand:#FFE8C2; --brand-200:#FADFCB;
      --card:#FFFFFF; --card-br:#FFE1CB;
      --hero-l:#FFEEE3; --hero-r:#FFF5E6;
      --shadow: 0 10px 30px rgba(0,0,0,.12);
      --radius: 20px;
      --maxw: 960px;
      --card-minh: clamp(360px, 60vh, 560px);
      --space: clamp(28px, 40vw, 44px);
    }

    /* =====================
       1) Base & Reset
       ===================== */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'SUIT', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, var(--hero-l), transparent),
                  radial-gradient(1200px 900px at 90% 30%, var(--hero-r), var(--bg));
    }

    /* 유틸리티 */
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    .skip-link { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .skip-link:focus { left: 16px; top: 16px; width:auto; height:auto; padding:10px 14px; background:#000; color:#fff; border-radius:10px; z-index:999; }

    /* =====================
       2) Layout
       ===================== */
    .page { min-height: 100dvh; display:flex; flex-direction:column; }
    .site-header, .site-footer { text-align:center; }
    .site-header { padding: 10dvh 16px 14px; }
    .site-main { flex: 1; display:flex; align-items:center; justify-content:center; padding: 0 16px 6dvh; }
    .container { width:min(var(--maxw), 94vw); margin:0 auto; }

    /* =====================
       3) Components
       ===================== */
    .brand__title { margin:0 0 6px; font-weight: 800; letter-spacing: -0.02em; font-size: clamp(24px, 5vw, 40px); }
    .brand__tagline { margin:0; color: var(--muted); font-size: clamp(14px, 3.2vw, 16px); }

    .card { background: var(--card); border: 1px solid var(--card-br); border-radius: var(--radius); box-shadow: var(--shadow); padding: var(--space); min-height: var(--card-minh); backdrop-filter: blur(6px); text-align:center; animation: floatIn .5s ease both; }
    @keyframes floatIn { from{opacity:0; transform: translateY(10px);} to{opacity:1; transform:none;} }

    .lead { font-size: clamp(16px, 2.8vw, 18px); margin: 6px 0 18px; color: var(--muted); }

    .actions { display:grid; gap: 18px; margin-bottom: 10px; }
    @media (min-width: 640px){ .actions { grid-template-columns: 1fr 1fr; } }

    .button { --btn-bg:#fff; --btn-br:#ddd; --btn-tx:var(--text);
      display:inline-flex; align-items:center; justify-content:center; gap:10px; width:100%;
      padding: clamp(40px, 60vw, 36px) clamp(18px, 5.5vw, 28px);
      font-size: clamp(18px, 3.6vw, 22px); font-weight: 800; border-radius: calc(var(--radius) - 4px);
      border: 2px solid var(--btn-br); background: var(--btn-bg); color: var(--btn-tx);
      cursor: pointer; transition: transform .08s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease; box-shadow: 0 6px 16px rgba(0,0,0,.06);
    }
    .button:active { transform: translateY(1px); }
    .button:focus-visible { outline: 3px solid #000; outline-offset: 3px; }

    .button--ask { --btn-bg: linear-gradient(180deg, var(--cta), #fff); --btn-br: #ffd9b8; }
    .button--ask:hover { border-color: var(--primary-600); box-shadow: 0 8px 20px rgba(233,140,69,.25); }

    .button--give { --btn-bg: linear-gradient(180deg, var(--brand-200), #fff); --btn-br: #ffd7a8; }
    .button--give:hover { border-color: #f2a154; box-shadow: 0 8px 20px rgba(242,161,84,.25); }

    .remember { display:inline-flex; align-items:center; gap:8px; margin-top: 4px; font-size: 14px; color: var(--muted); justify-content:center; }
    .remember input { width: 1.05rem; height: 1.05rem; }

    .restore { margin-top: 12px; font-size: 14px; color: var(--muted); display:flex; flex-wrap:wrap; align-items:center; justify-content:center; gap:10px; }

    .link { display:inline-block; padding: 8px 12px; border-radius: 12px; border:1px dashed var(--card-br); text-decoration: none; color: inherit; }
    .link:hover { background: #fff7ef; }
    .link--subtle { background:none; border:none; cursor:pointer; text-decoration: underline; padding:6px 8px; }

    .site-footer { color: #9a877c; padding: 10px 0 24px; font-size: 13px; }

    /* 접근성: 모션 최소화 */
    @media (prefers-reduced-motion: reduce){
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#role">본문으로 건너뛰기</a>

  <div class="page">
    <header class="site-header">
      <div class="container brand">
        <h1 class="brand__title">소소한 도움</h1>
        <p class="brand__tagline">따뜻한 연결, 여기서 시작해요</p>
      </div>
    </header>

    <main id="role" class="site-main" role="main" aria-labelledby="section-title">
      <div class="container">
        <section class="card" aria-live="polite">
          <h2 id="section-title" class="sr-only">역할 선택</h2>
          <p class="lead">원하시는 버튼을 선택해 주세요</p>

          <div class="actions" role="group" aria-label="역할 선택">
            <button type="button" class="button button--ask" data-role="ask" aria-label="도움이 필요해요 (도와주세요)">🙋‍♀️ 도와주세요</button>
            <button type="button" class="button button--give" data-role="give" aria-label="도움을 드릴게요 (도와줄게요)">🤝 도와줄게요</button>
          </div>

          <label class="remember" for="remember">
            <input type="checkbox" id="remember" checked />
            <span>선택 기억하기</span>
          </label>

          <div class="restore" hidden>
            <span class="restore__text" id="restoreText"></span>
            <a id="goMain" class="link" href="main.html" aria-label="메인으로 이동">메인으로 가기</a>
            <button id="clear" class="link link--subtle" type="button">선택 변경</button>
          </div>
        </section>
      </div>
    </main>

    <footer class="site-footer">© <span id="year"></span> 소소한 도움</footer>
  </div>

  <noscript>
    <div style="max-width:640px;margin:16px auto;padding:12px;border:1px solid #ddd;border-radius:12px;background:#fff">
      <p style="margin:8px 0 12px;color:#666">자바스크립트가 꺼져 있어 기본 링크로 이동합니다.</p>
      <p style="margin:8px 0"><a href="main.html?role=ask">도와주세요</a> · <a href="main.html?role=give">도와줄게요</a></p>
    </div>
  </noscript>

  <script>
    (() => {
      // ===== 0) Config
      const MAIN = 'main.html'; // TODO: 메인 파일명이 다르면 수정하세요
      const ROLE_KEY = 'soso_role';

      // ===== 1) DOM
      const el = {
        year: document.getElementById('year'),
        remember: document.getElementById('remember'),
        restore: document.querySelector('.restore'),
        restoreText: document.getElementById('restoreText'),
        goMain: document.getElementById('goMain'),
        clear: document.getElementById('clear'),
        actions: document.querySelector('.actions'),
        askBtn: null,
      };

      // 연도 표시
      if (el.year) el.year.textContent = new Date().getFullYear();

      // ===== 2) Helpers
      function saveRole(role){
        if (el.remember?.checked){
          try { localStorage.setItem(ROLE_KEY, role); } catch(_){}
        }
      }
      function navigate(role){
        saveRole(role);
        const url = new URL(MAIN, location.href);
        url.searchParams.set('role', role);
        location.href = url.toString();
      }

      // ===== 3) Handlers
      // 버튼 클릭(이벤트 위임)
      el.actions?.addEventListener('click', (ev) => {
        const btn = ev.target.closest('button[data-role]');
        if (!btn) return;
        navigate(btn.dataset.role);
      });

      // 키보드 단축키
      window.addEventListener('keydown', (e) => {
        const k = e.key.toLowerCase();
        if (k === '1' || k === 'a') { e.preventDefault(); navigate('ask'); }
        if (k === '2' || k === 'g') { e.preventDefault(); navigate('give'); }
      });

      // 이전 선택 복구
      try {
        const saved = localStorage.getItem(ROLE_KEY);
        if (saved){
          el.restore.hidden = false;
          el.restoreText.textContent = `이전에 선택한 역할: ${saved === 'ask' ? '도와주세요' : '도와줄게요'}`;
          el.goMain.href = `${MAIN}?role=${saved}`;
        }
      } catch(_){}

      // 선택 초기화
      el.clear?.addEventListener('click', () => {
        try { localStorage.removeItem(ROLE_KEY); } catch(_){}
        el.restore.hidden = true;
        if (el.remember) el.remember.checked = true;
        document.querySelector('button[data-role="ask"]')?.focus();
      });

      // 초기 포커스
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelector('button[data-role="ask"]')?.focus();
      });
    })();
  </script>
</body>
</html>
