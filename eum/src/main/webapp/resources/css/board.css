/* ======================= Design tokens ======================= */
:root{
  /* 색상 팔레트 */
  --bg:#FFF8F2;
  --card:#FFFFFF;
  --ink:#4A3C35;            /* 본문색 */
  --text: var(--ink);       /* header.css 호환용 별칭 */
  --muted:#7D6B62;
  --line:#EADBC8;

  --accent:#FFB86C;
  --accent-strong:#FF9E3D;

  --tab:#FFE8C2;
  --tab-active:#FFD89A;
  --hover:#FFF2E5;

  --danger:#E5484D;         /* 긴급 */
  --ok:#2F7A2E;             /* 완료 */
  --warn:#B47100;           /* 대기 */

  /* 공통 UI */
  --radius:20px;
  --shadow:0 8px 24px rgba(0,0,0,.08);
  --shadow-soft:0 4px 10px rgba(0,0,0,.06);
  --header-h:72px;
  --maxw:1120px;

  /* 포커스 토큰(의미 분리) */
  --focus-color:#5B9DFF;            /* outline 색상용 */
  --focus-ring:0 0 0 3px rgba(246,169,109,.35); /* box-shadow 링 */
}
:root{
      --bg:#FFF8F2; --text:#59463E; --muted:#806A5A;
      --primary:#F6A96D; --primary-600:#e98c45;
      --brand:#FFE8C2; --brand-200:#FADFCB;
      --card:#FFFFFF; --card-br:#FFE1CB;
      --hero-l:#FFEEE3; --hero-r:#FFF5E6;
      --cta:#FFF0D5; --footer:#FFECD6;
      --shadow: 0 8px 24px rgba(0,0,0,0.08);
      --shadow-soft: 0 4px 10px rgba(0,0,0,0.06);
      --radius: 20px; --maxw: 1100px;
      --header-h: 72px;
      --bottomnav-h: 0px;
      --focus: 0 0 0 3px rgba(246,169,109,.35);
    }

/* ======================= Base / Reset ======================= */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:'SUIT',system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
  font-size:18px;
  line-height:1.6;
  padding-top:var(--header-h); /* 고정 헤더 높이만큼 여백 */
}

/* 헤더 내부 컨테이너는 패딩 0 (헤더 높이 정확히 산출) */
body>header .container{ padding:0 !important }

.container{
  max-width:var(--maxw);
  margin:0 auto;
  padding:24px;
}

/* 링크(전역) */
a{ color:inherit; text-decoration:none }
a:focus-visible{
  outline:3px solid var(--focus-color);
  outline-offset:2px;
  border-radius:10px;
}

/* 키보드 포커스 시 링 */
button:focus-visible,
.btn:focus-visible,
.tab-btn:focus-visible,
a.row-link:focus-visible{
  outline:3px solid var(--focus-color);
  outline-offset:2px;
  border-radius:10px;
}

/* ======================= Board wrapper ======================= */
.board{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:20px;
  box-shadow:0 6px 20px rgba(0,0,0,.06);
  overflow:hidden;
  margin-top:8px; /* 중복값 정리 (80px 제거) */
}

/* 상단 보드 헤더(탭/툴바 포함) */
header.board-header{
  position:sticky;
  top:var(--header-h);
  z-index:900;
  display:grid;
  gap:16px;
  padding:20px;
  background:#FFE8C2;
  border-bottom:1px solid var(--line);
}

.board-title{ font-size:28px; font-weight:800 }
.desc{ font-size:16px; color:var(--muted) }

/* 접근성: 스킵 링크 */
.skip-link{
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  position:static; width:auto; height:auto;
  padding:8px 12px; background:#000; color:#fff; border-radius:10px;
}

/* ======================= Tabs ======================= */
.tabs{ display:flex; flex-wrap:wrap; gap:8px }
.tab-btn{
  appearance:none; cursor:pointer; border:0;
  padding:12px 16px; border-radius:14px;
  background:var(--tab); font-weight:800;
}
.tab-btn[aria-selected="true"]{ background:var(--tab-active) }

/* ======================= Toolbar ======================= */
.toolbar{
  display:grid; grid-template-columns:1fr auto;
  gap:12px; align-items:center;
}
.filters{ display:flex; flex-wrap:wrap; gap:8px }

.field{
  display:flex; align-items:center; gap:8px;
  padding:10px 12px;
  background:#FFF9F2; border:1px solid var(--line); border-radius:12px;
}
.field input,
.field select{
  min-width:120px; border:none; background:transparent; font-size:16px;
}
.field input:focus,
.field select:focus{ outline:none }

.cta{ display:flex; gap:8px }

.btn{
  appearance:none; cursor:pointer;
  padding:12px 18px; border-radius:14px;
  border:1px solid transparent; font-weight:800;
}
.btn.primary{ background:var(--accent); color:#fff }
.btn.primary:hover{ background:var(--accent-strong) }
.btn.ghost{ background:#fff; border-color:var(--line) }
.btn.ghost:hover{ background:#FFFBF5 }

/* ======================= Table ======================= */
.table-wrap{ overflow:auto; border-top:1px solid var(--line) }

table{ width:100%; border-collapse:collapse; font-size:18px }

thead th{
  position:sticky; top:0; z-index:1;
  padding:14px; text-align:center; font-weight:900;
  background:#FFF7EA; border-bottom:1px solid var(--line);
}

tbody td{
  padding:16px 14px; text-align:center;
  border-bottom:1px solid var(--line);
}

tr:hover td{ background:var(--hover) }

a.row-link{ color:inherit; text-decoration:none }

/* ======================= Badges / Status ======================= */
/* 텍스트 배지를 올바른 '필' 형태로 재정의 (이전 10×10 dot 제거) */
.badge{
  position:absolute; transform: translate(9px, -9px);
  width:10px; height:10px; border-radius:999px; background:#ff4d4f;
  box-shadow:0 0 0 2px #fff;
}
.badge.type{    background:#E7F2FF; color:#1E5AA8 }
.badge.urgent{  background:#FFE5E5; color:var(--danger) }
.badge.normal{  background:#FFF1D6; color:#794409 }

.status{ font-weight:900 }
.status.done{ color:var(--ok) }
.status.wait{ color:var(--warn) }

/* ======================= Pagination ======================= */
.pagination{
  display:flex; justify-content:center; gap:8px; padding:18px;
}
.page-btn{
  cursor:pointer;
  padding:10px 14px; border-radius:12px; font-weight:800;
  background:#fff; border:1px solid var(--line);
}
.page-btn[aria-current="page"]{ background:var(--tab-active); border-color:transparent }

/* === 모바일 깨짐 해결: 배지를 인라인 '필' 형태로 재정의 === */
.board .badge{
  position: static !important;
  transform: none !important;
  display: inline-block !important;
  width: auto !important;
  height: auto !important;
  padding: 4px 10px;
  border-radius: 999px;
  box-shadow: none !important;
  font-weight: 800;
  font-size: 14px;
  line-height: 1;
  white-space: nowrap;
  word-break: keep-all;
  border: 1px solid transparent;
  background: #E7F2FF;        /* 기본(type) */
  border-color: #CFE4FF;
  color: #1E5AA8;
}
.board .badge.type{    background:#E7F2FF; border-color:#CFE4FF; color:#1E5AA8 }
.board .badge.urgent{  background:#FFE5E5; border-color:#FFC2C4; color:#B42318 }
.board .badge.normal{  background:#FFF1D6; border-color:#FFD79B; color:#7A4D00 }

/* 한글 낱글자 줄바꿈 방지(헤더나 외부 CSS에서 break-all을 건드린 경우 대비) */
.board table, .board th, .board td{ word-break: keep-all }

/* ======================= Desktop: req 탭 테이블 레이아웃 고정 ======================= */
@media (min-width:821px){
  #panel-req table{ display:table; table-layout:fixed; width:100% }
  #panel-req thead{ display:table-header-group }
  #panel-req tbody{ display:table-row-group }
  #panel-req tr{ display:table-row }
  #panel-req th, #panel-req td{ display:table-cell }

  /* 글자 넘침 방지 + 정렬 */
  #panel-req thead th,
  #panel-req tbody td{
    white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    text-align:center; vertical-align:middle;
  }

  /* 액션 버튼 가로 정렬 보장 */
  #panel-req .row-actions{
    display:flex; justify-content:center; gap:8px;
  }
}

/* ======================= Mobile: 카드형 테이블 ======================= */
@media (max-width:820px){
  .toolbar{ grid-template-columns:1fr }

  thead{ display:none }
  table, tbody, tr, td{ display:block; width:100% }

  tbody{ padding:10px }
  tr{
    margin-bottom:12px; padding:12px;
    background:#FFF7EE; border:1px solid var(--line); border-radius:16px;
  }
  tbody td{ border:none; text-align:left; padding:6px 2px }

  tbody td[data-label]{ display:flex; gap:10px }
  tbody td[data-label]::before{
    content:attr(data-label); flex:0 0 110px; width:110px;
    color:var(--muted); font-weight:900;
  }

  .row-actions{ display:flex; gap:8px; margin-top:8px }
}

/* ======================= Motion ======================= */
@media (prefers-reduced-motion:reduce){
  *{ transition:none !important; animation:none !important }
}

/* 모바일 카드 레이아웃에서 라벨/값 가로 정렬 보강 */
@media (max-width:820px){
  #panel-req tbody td[data-label]{ display:flex; gap:10px; align-items:flex-start }
  #panel-req .row-actions{ display:flex; gap:8px; margin-top:8px }
}